# 要件定義

## 内容
クライアントがサーバに接続し、mp4 ファイルをアップロードするためのサービスを開発します。サーバはバックグラウンドで動作し、クライアントは CLI を通じてサーバに接続します。クライアントが CLI でコマンドを実行すると、アップロードするファイルが選択されます。ファイルのアップロードが完了したら、サーバから状態を報告するメッセージがクライアントに送られます。

## 機能要件
- サーバは CLI で起動し、バックグラウンドで着信接続を待機します。サーバが停止していると、それはサービスが停止しているという意味です。
- クライアントは TCP を使用してサーバにファイルを送信する必要があります。TCP は UDP よりもオーバーヘッドが大きいですが、確実にファイル全体が送信されることを保証するためです。
- TCP での送信では、比較的安定したパケットサイズを使ってください。TCP プロトコルに基づいて、パケットの上限サイズは 65535 バイト（16 ビット長）である可能性がありますが、通常の最大セグメントサイズは下位ネットワークレベルで 1460 バイトです。すべてのデータが送信されるまで、最大サイズとして 1400 バイトのパケットを使用してください。
- 接続プロトコルは基本的なものです。最初にサーバに送信される 32 バイトは、ファイルのバイト数をサーバに通知します。このプロトコルは最大で 4GB（2^32バイト）までのファイルに対応しています。
- サーバは、受け取ったデータバイトを常に mp4 ファイルとして解釈します。他のファイル形式はサポートされていませんので、クライアントは送信するファイルが mp4 であることを確認する必要があります。
- サーバは、レスポンスプロトコルを用いて応答します。これは、ステータス情報を含む 16 バイトのメッセージです。

## 非機能要件
- ファイルアップロードシステムは、ファイルが破損することなく完全に送信されることを保証しなければなりません。つまり、ファイル全体が正確に到着するか、プロセスが中断されてファイルが保存されない、どちらかの状態でなければなりません。TCP とデータサイズの設定は、この要件を満たすようにされています。
- ファイルアップロードサーバは、最大で 4TB のデータを保存可能です。この容量制限に達した場合、サービスはそれ以上稼働できません。
- ファイルシステムは、毎秒 20,000 個の 1400 バイトのパケットを処理する能力が必要です。
