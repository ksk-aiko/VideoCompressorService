@startuml
title Component Diagram - Video Compressor Service

package "Client" {
  [CLI]
  [Uploader]
  [TCPSocketClient]
}

package "Server" {
  [TCPSocketServer]
  [ConnectionManager]
  [RequestHandler]
  [VideoProcessor]
  [FileReceiver]
  [DiskWriter]
  [StorageChecker]
  [StatusResponder]
  [Connection]
}

[CLI] --> [Uploader]
[Uploader] --> [TCPSocketClient]

[TCPSocketServer] --> [ConnectionManager]
[TCPSocketServer] --> [RequestHandler] : (creates)
[RequestHandler] --> [Connection]
[RequestHandler] --> [VideoProcessor]
[RequestHandler] --> [FileReceiver]
[RequestHandler] --> [StorageChecker]
[RequestHandler] --> [StatusResponder]
[FileReceiver] --> [DiskWriter]

[VideoProcessor] ..> [ffmpeg] : (executes)

note right of [ConnectionManager]
Limits one active process per IP address
to ensure fair resource usage.
end note

note right of [VideoProcessor]
Acts as a facade for all FFMPEG operations,
such as compression, resizing, and clipping.
end note

note right of [RequestHandler]
Orchestrates the entire server-side workflow
for a single client connection.
end note
@enduml
